# WebServer_cpp

Linux下使用C++实现的轻量级Web服务器

使用单进程多线程模型，通过I/O多路复用技术epoll与线程池技术模拟Proactor高并发模型，利用主从状态机来解析HTTP报文，同时使用信号量实现线程同步。

主线程和内核负责处理接受新连接和读写数据等I/O操作，而工作线程仅负责业务逻辑，处理客户请求。

服务器大致工作流程如下：

1. 维护一个线程池和请求事件队列 (list)
2. 主线程为使用IO多路复用技术 (epoll) 监听所有socket上的事件。
3. 若有新请求到来，主线程接收新的 socket 连接，然后往 epoll 内核事件表中注册该 socket 上的读写事件。
4. 如果连接socket上有读写事件发生，主线程从socket上读取数据，并将数据封装成请求对象插入到list中。
5. 工作线程从 list 中取出任务，完成业务逻辑处理。

项目使用主从状态机来解析HTTP报文，主状态机负责解析报文的每一行，从状态机负责解析某一行的具体内容。使用内存映射来暂存资源，之后发送资源需要用到这块内存。
